(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{255:function(e,t,n){e.exports=n(448)},37:function(e,t){e.exports={api_url:"https://chat-realtime-by-keyti.herokuapp.com/api",url:"https://chat-realtime-by-keyti.herokuapp.com/chat"}},431:function(e,t){},448:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),c=n(25),l=n(26),o=n(29),u=n(27),m=n(30),p=n(28),d=n(46),h=n(177),g=n(178),f=n(15),E={isSignin:!1,signinSuccessful:!1,error:null},v={isSignup:!1,signupSuccessful:!1,error:null},S={isFindUser:!1,findUserSuccessful:!1,data:[],error:null},b=n(187),I={receiverID:"",listFriend:[],listMessage:[],error:null,callingAPI:!1,titleName:""},y=Object(d.c)({signinReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNIN_START":return Object(f.a)({},e,{isSignin:!0});case"SIGNIN_SUCCESSFUL":return Object(f.a)({},e,{isSignin:!1,signinSuccessful:!0});case"SIGNIN_FAIL":return Object(f.a)({},e,{isSignin:!1,error:t.err});case"SIGNIN_FAIL_HANDLE":return Object(f.a)({},e,{error:null});default:return e}},signupReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_START":return Object(f.a)({},e,{isSignup:!0});case"SIGNUP_SUCCESSFUL":return Object(f.a)({},e,{isSignup:!1,signupSuccessful:!0});case"SIGNUP_FAIL":return Object(f.a)({},e,{isSignup:!1,error:t.err});case"SIGNUP_FAIL_HANDLE":return Object(f.a)({},e,{error:null});default:return e}},findUserReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FINDUSER_START":return Object(f.a)({},e,{isFindUser:!0});case"FINDUSER_SUCCESSFUL":return Object(f.a)({},e,{isFindUser:!1,findUserSuccessful:!0,data:t.result});case"FINDUSER_FAIL":return Object(f.a)({},e,{isFindUser:!1,error:t.err});case"FINDUSER_FAIL_HANDLE":return Object(f.a)({},e,{error:null});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TITLE_NAME":return Object(f.a)({},e,{titleName:t.titleName});case"SET_RECEIVER_ID":return Object(f.a)({},e,{receiverID:t.receiverID});case"SET_LIST_FRIEND":return Object(f.a)({},e,{listFriend:t.listFriend,callingAPI:!1});case"SET_LIST_MESSAGE":return Object(f.a)({},e,{listMessage:t.listMessage,callingAPI:!1});case"PUSH_MESSAGE":return Object(f.a)({},e,{listMessage:[].concat(Object(b.a)(e.listMessage),[t.arr]),callingAPI:!1});case"CALLING_API":return Object(f.a)({},e,{callingAPI:!0});case"FAIL":return Object(f.a)({},e,{error:t.err,callingAPI:!1});case"FAIL_HANDLE":return Object(f.a)({},e,{error:null});default:return e}}}),_=function(e,t){return"LOG_OUT"===t.type&&(e=void 0),y(e,t)},C=Object(h.createLogger)({timestamps:!0,duration:!0}),k=Object(d.e)(_,Object(d.d)(Object(d.a)(C,g.a))),N=n(185),O=n(53),j=n(31),R=n(95),L=n(54),D=n.n(L),w=n(37),F=n.n(w);function U(e,t){return function(n){n({type:"SIGNIN_START"}),function(e,t){return new Promise(function(n,a){var r={username:e,password:t};return D.a.post(F.a.api_url+"/users/login",r).then(function(e){if(0===e.data.status)return a(e.data.error.message);localStorage.setItem("userID",e.data.result.id),localStorage.setItem("accessToken",e.data.result.accessToken),localStorage.setItem("refreshToken",e.data.result.refreshToken),n()}).catch(function(e){a(e)})})}(e,t).then(function(){n({type:"SIGNIN_SUCCESSFUL"})}).catch(function(e){n(function(e){return{type:"SIGNIN_FAIL",err:e}}(e))})}}var T=n(36),x=n.n(T),A=n(64),M=n.n(A),P=n(89),G=n.n(P),B=n(62),H=n.n(B),W=n(44),K=n.n(W),q=n(90),V=n.n(q),J=n(41),z=n.n(J),$=n(61),Q=n.n($),X=n(179),Y=n.n(X),Z=n(34),ee=n.n(Z),te=n(19),ne=n.n(te),ae=n(5),re=n.n(ae),ie=n(16),se=n.n(ie),ce=n(52),le=n.n(ce),oe=n(72),ue=n.n(oe),me=n(65),pe=n.n(me);function de(e,t,n,a,r){return function(i){i({type:"SIGNUP_START"}),function(e,t,n,a,r){return new Promise(function(i,s){var c={user:{username:e,password:t,full_name:n,phone:a,genre:r}};return D.a.post(F.a.api_url+"/users/create",c).then(function(e){if(1===e.data.status)return i();e.data.error.message.errmsg&&s("email or phone number has been registed"),s(e.data.error.message)}).catch(function(e){s(e)})})}(e,t,n,a,r).then(function(){i({type:"SIGNUP_SUCCESSFUL"})}).catch(function(e){i(he(e))})}}function he(e){return{type:"SIGNUP_FAIL",err:e}}var ge=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={full_name:"",username:"",password:"",phone:"",genre:""},n.handleChange=function(e){n.setState({genre:e.target.value})},n.onClickSignUp=n.onClickSignUp.bind(Object(j.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"onClickSignUp",value:function(){var e=this.state,t=e.full_name,n=e.username,a=e.password,r=e.phone,i=e.genre;this.props.createUser(n,a,t,r,i)}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.signupReducer.error&&(alert("sign up fail: "+this.props.signupReducer.error),this.props.signup_fail_handle()),this.props.signupReducer.signupSuccessful&&alert("register true"),r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{variant:"h6",gutterBottom:!0},"Register Form"),r.a.createElement("form",null,r.a.createElement(se.a,{container:!0,spacing:24},r.a.createElement(se.a,{item:!0,xs:12},r.a.createElement(le.a,{required:!0,id:"full_name",name:"full_name",label:"Full name",fullWidth:!0,autoComplete:"billing full name",onChange:function(t){return e.setState({full_name:t.target.value})}})),r.a.createElement(se.a,{item:!0,xs:12},r.a.createElement(le.a,{required:!0,id:"email",name:"email",label:"Email",fullWidth:!0,autoComplete:"billing email",onChange:function(t){return e.setState({username:t.target.value})}})),r.a.createElement(se.a,{item:!0,xs:12},r.a.createElement(le.a,{required:!0,id:"password",name:"password",type:"password",label:"Password",fullWidth:!0,autoComplete:"billing password",onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(se.a,{item:!0,xs:12},r.a.createElement(le.a,{required:!0,id:"phone",name:"phone",label:"Phone",fullWidth:!0,autoComplete:"billing phone",onChange:function(t){return e.setState({phone:t.target.value})}})),r.a.createElement(se.a,{item:!0,xs:12},r.a.createElement(ue.a,{required:!0,component:"legend"},"Genre")),r.a.createElement(se.a,{item:!0,xs:12,sm:4},r.a.createElement(K.a,{control:r.a.createElement(pe.a,{checked:"1"===this.state.genre,onChange:this.handleChange,value:"1",name:"radio-button-demo","aria-label":"B"}),label:"Male"})),r.a.createElement(se.a,{item:!0,xs:12,sm:4},r.a.createElement(K.a,{control:r.a.createElement(pe.a,{checked:"2"===this.state.genre,onChange:this.handleChange,value:"2",name:"radio-button-demo","aria-label":"B"}),label:"Female"})),r.a.createElement(se.a,{item:!0,xs:12,sm:4},r.a.createElement(K.a,{control:r.a.createElement(pe.a,{checked:"3"===this.state.genre,onChange:this.handleChange,value:"3",name:"radio-button-demo","aria-label":"B"}),label:"Other"})),r.a.createElement(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:this.props.signupReducer.isSignup&&!this.props.signupReducer.signupSuccessful,onClick:this.onClickSignUp},"Sign Up"))))}}]),t}(r.a.Component),fe=Object(p.b)(function(e){return{signupReducer:e.signupReducer}},function(e){return{createUser:function(t,n,a,r,i){return e(de(t,n,a,r,i))},signup_fail:function(){return e(he())},signup_fail_handle:function(){return e({type:"SIGNUP_FAIL_HANDLE"})}}})(re()(function(e){return{submit:{marginTop:3*e.spacing.unit}}})(ge)),Ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},n.onClickSignin=n.onClickSignin.bind(Object(j.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("accessToken")&&this.props.history.push("/app")}},{key:"onClickSignin",value:function(){var e=this.state,t=e.username,n=e.password;this.props.login(t,n)}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.signinReducer.error&&(alert("sign fail: "+this.props.signinReducer.error),this.props.signin_fail_handle()),this.props.signinReducer.signinSuccessful&&this.props.history.push("/app"),r.a.createElement("main",{className:t.main},r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{className:t.type,component:"h4",variant:"h6"},r.a.createElement("span",{role:"img","aria-label":"Love"}," \u2764\ufe0f "),"Chat Realtime",r.a.createElement("span",{role:"img","aria-label":"Love"}," \u2764\ufe0f ")),r.a.createElement(se.a,{container:!0,spacing:40},r.a.createElement(se.a,{item:!0,xs:12,sm:6},r.a.createElement(ee.a,{className:t.paper},r.a.createElement(fe,null))),r.a.createElement(se.a,{item:!0,xs:12,sm:6},r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,null),r.a.createElement(ee.a,{className:t.paper},r.a.createElement(x.a,{className:t.avatar},r.a.createElement(Y.a,null)),r.a.createElement(ne.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form},r.a.createElement(H.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Q.a,{htmlFor:"email"},"Email Address"),r.a.createElement(z.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(t){return e.setState({username:t.target.value})}})),r.a.createElement(H.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Q.a,{htmlFor:"password"},"Password"),r.a.createElement(z.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:function(t){return e.setState({password:t.target.value})}})),r.a.createElement(K.a,{control:r.a.createElement(V.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(M.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:this.props.signinReducer.isSignin&&!this.props.signinReducer.signinSuccessful,onClick:this.onClickSignin},"Sign in"))),r.a.createElement(ne.a,{className:t.type,component:"h4",variant:"h6"},"Develop with",r.a.createElement("span",{role:"img","aria-label":"Love"}," \u2764\ufe0f "),"by Keyti"))))))}}]),t}(r.a.Component),ve=Object(p.b)(function(e){return{signinReducer:e.signinReducer}},function(e){return{login:function(t,n){return e(U(t,n))},signin_fail_handle:function(){return e({type:"SIGNIN_FAIL_HANDLE"})}}})(re()(function(e){return{main:Object(R.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:900,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},type:{marginTop:3*e.spacing.unit,color:"rgba(0, 0, 0, 0.54)",textAlign:"center"}}})(Ee)),Se=n(180),be=n.n(Se),Ie=n(18),ye=n(49),_e=n.n(ye),Ce=n(183),ke=n.n(Ce),Ne=n(42),Oe=n.n(Ne),je=n(96),Re=n(182),Le=n.n(Re),De=n(184),we=n.n(De),Fe=n(73),Ue=n.n(Fe),Te=n(63),xe=n.n(Te);function Ae(e){return function(t){t({type:"FINDUSER_START"}),function(e){return new Promise(function(t,n){return D.a.get(F.a.api_url+"/users/find",{params:{keyword:e}}).then(function(e){if(0===e.data.status)return n(e.data.error.message);t(e.data.result)}).catch(function(e){return n(e)})})}(e).then(function(e){t(function(e){return{type:"FINDUSER_SUCCESSFUL",result:e}}(e))}).catch(function(e){t(function(e){return{type:"FINDUSER_FAIL",err:e}}(e))})}}var Me=n(91),Pe=n.n(Me);var Ge=Object(Ie.withStyles)({card:{margin:"10px"},title:{fontSize:14,maxWidth:"50vw"},div:{display:"table"},sender:{display:"flex",justifyContent:"flex-end"},seen:{color:"#bdbdbd"}})(function(e){var t,n,a=e.classes;return!0===e.sender&&(t=a.sender),!0===e.seen&&(n="seen"),r.a.createElement("li",{className:t,style:{listStyleType:"none"}},r.a.createElement("div",{className:a.div},r.a.createElement(_e.a,{className:a.card},r.a.createElement(Pe.a,null,r.a.createElement(ne.a,{className:a.title,color:"textSecondary",gutterBottom:!0},e.content))),r.a.createElement("div",{className:a.seen},n)))}),Be=n(181),He=n(48),We=n.n(He),Ke=n(50),qe=n.n(Ke),Ve=n(51),Je=n.n(Ve),ze=n(45),$e=n.n(ze),Qe=n(93),Xe=n.n(Qe),Ye=n(92),Ze=n.n(Ye),et=n(74),tt=n.n(et),nt=n(66),at=n.n(nt);function rt(){return{"Content-Type":"application/json; charset=utf-8",Accept:"application/json","x-access-token":localStorage.getItem("accessToken")}}function it(){return new Promise(function(e,t){var n={userID:localStorage.getItem("userID")};return D.a.post(F.a.api_url+"/chats/getListFriend",n,{headers:rt()}).then(function(n){if(0===n.data.status)return t(n.data.error);e(n.data.result)}).catch(function(e){t(e)})})}function st(){return function(e){e({type:"CALLING_API"}),it().then(function(t){if(e(lt(t)),t.length>=1){var n=t[0]._id;e(ct(n)),e(ut(n)),e(ot(t[0].username))}}).catch(function(t){e(mt(t))})}}function ct(e){return function(t){t({type:"CALLING_API"}),function(e){return new Promise(function(t,n){var a={senderID:localStorage.getItem("userID"),receiverID:e};return D.a.post(F.a.api_url+"/chats/getListMessage",a,{headers:rt()}).then(function(e){if(0===e.data.status)return n(e.data.error.message);t(e.data.result)}).catch(function(e){n(e)})})}(e).then(function(e){t(function(e){return{type:"SET_LIST_MESSAGE",listMessage:e}}(e))}).catch(function(e){t(mt(e))})}}function lt(e){return{type:"SET_LIST_FRIEND",listFriend:e}}function ot(e){return{type:"SET_TITLE_NAME",titleName:e}}function ut(e){return{type:"SET_RECEIVER_ID",receiverID:e}}function mt(e){return{type:"FAIL",err:e}}var pt={avatar:{backgroundColor:at.a[100],color:at.a[600]}},dt=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){n.props.onClose(n.props.selectedValue)},n.handleListItemClick=function(e,t){n.props.onClose(),n.props.set_title_name(t),n.props.getListMessage(e),n.props.select_user_to_chat(e)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=(t.onClose,t.selectedValue,Object(Be.a)(t,["classes","onClose","selectedValue"]));return r.a.createElement(Ze.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Xe.a,{id:"simple-dialog-title"},"List users"),r.a.createElement("div",null,r.a.createElement(We.a,null,this.props.findUserReducer.data.map(function(t){return r.a.createElement(qe.a,{button:!0,onClick:function(){return e.handleListItemClick(t._id,t.username)},key:t._id},r.a.createElement(Je.a,null,r.a.createElement(x.a,{className:n.avatar},r.a.createElement(tt.a,null))),r.a.createElement($e.a,{primary:t.username}))}))))}}]),t}(r.a.Component),ht=Object(p.b)(function(e){return{findUserReducer:e.findUserReducer,chatReducer:e.chatReducer}},function(e){return{getListFriend:function(){return e(st())},getListMessage:function(t){return e(ct(t))},select_user_to_chat:function(t){return e(ut(t))},set_title_name:function(t){return e(ot(t))}}})(Object(Ie.withStyles)(pt)(dt)),gt={avatar:{backgroundColor:at.a[100],color:at.a[600]},onlineBar:{textAlign:"right"}},ft=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleListItemClick=function(e,t){n.props.getListMessage(e),n.props.select_user_to_chat(e),n.props.set_title_name(t)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(We.a,null,this.props.chatReducer.listFriend.map(function(n){return n.socketID?r.a.createElement(qe.a,{button:!0,onClick:function(){return e.handleListItemClick(n._id,n.username)},key:n._id},r.a.createElement(Je.a,null,r.a.createElement(x.a,{className:t.avatar},r.a.createElement(tt.a,null))),r.a.createElement($e.a,{primary:n.username}),r.a.createElement($e.a,{primary:"online",className:t.onlineBar})):r.a.createElement(qe.a,{button:!0,onClick:function(){return e.handleListItemClick(n._id,n.username)},key:n._id},r.a.createElement(Je.a,null,r.a.createElement(x.a,{className:t.avatar},r.a.createElement(tt.a,null))),r.a.createElement($e.a,{primary:n.username}))})))}}]),t}(r.a.Component),Et=Object(p.b)(function(e){return{chatReducer:e.chatReducer}},function(e){return{getListFriend:function(){return e(st())},getListMessage:function(t){return e(ct(t))},select_user_to_chat:function(t){return e(ut(t))},set_title_name:function(t){return e(ot(t))}}})(Object(Ie.withStyles)(gt)(ft));var vt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClickSearch=function(){n.setState({open:!0}),n.props.findUser(n.state.searchText)},n.handleClose=function(){n.setState({open:!1})},n.onClickLogOut=function(e){n.props.log_out(),localStorage.clear(),n.props.history.push("/")},n.onFocusMessage=function(){var e=n.props.chatReducer.listMessage,t=e[e.length-1];if(t){var a={senderID:t.senderID,receiverID:t.receiverID};localStorage.getItem("userID")!==t.senderID&&n.socket.emit("is seen",a)}},n.handleClickSend=function(e){if(n.state.content){var t={senderID:localStorage.getItem("userID"),receiverID:n.props.chatReducer.receiverID,content:n.state.content},a={senderID:localStorage.getItem("userID"),content:n.state.content,date:Date(Date.now())};n.props.chatReducer.listFriend.find(function(e){return e._id===n.props.chatReducer.receiverID})?n.socket.emit("chat message",t):(n.socket.emit("first message",t),n.socket.on("return friend",function(){n.props.getNewFriend()})),n.props.push_message(a),n.setState({content:""});var r=document.getElementById("inputMessage");r.scrollTop=r.scrollHeight}},n.componentWillMount=function(){null===localStorage.getItem("accessToken")&&n.props.history.push("/"),n.props.getListFriend();var e=localStorage.getItem("accessToken");n.socket=be()(F.a.url,{query:{token:e}}),n.socket.on("error",function(e){alert("socket error"+e)}),n.socket.on("chat message",function(e){var t={senderID:e.senderID,receiverID:e.receiverID,content:e.content,date:Date(Date.now())};e.senderID===n.props.chatReducer.receiverID&&n.props.push_message(t)}),n.socket.on("first message",function(e){var t={senderID:e.senderID,receiverID:e.receiverID,content:e.content,date:Date(Date.now())};n.props.getListFriend(),e.senderID===n.props.chatReducer.receiverID&&n.props.push_message(t)}),n.socket.on("is seen",function(){n.props.getListMessage(n.props.chatReducer.receiverID)})},n.state={open:!1,searchText:"",content:""},n.socket=null,n.handleKeyPressSearch=n.handleKeyPressSearch.bind(Object(j.a)(n)),n.handleKeyPressMessage=n.handleKeyPressMessage.bind(Object(j.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleKeyPressSearch",value:function(e){"Enter"===e.key&&this.handleClickSearch()}},{key:"handleKeyPressMessage",value:function(e){"Enter"===e.key&&this.handleClickSend(e)}},{key:"componentDidMount",value:function(){var e=0,t=document.getElementById("inputMessage");setInterval(function(){t.scrollHeight!==e&&(e=t.scrollHeight,t.scrollTop=t.scrollHeight)},100)}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.findUserReducer.error&&(alert("Find user fail: "+this.props.findUserReducer.error),this.props.signin_fail_handle()),r.a.createElement(se.a,{container:!0,spacing:0},r.a.createElement(se.a,{item:!0,xs:12,sm:3},r.a.createElement("div",{className:t.divTop,style:{borderRight:"1px solid #e0e0e0",justifyContent:"center"}},r.a.createElement(je.a,null,"Chat realtime"))),r.a.createElement(se.a,{item:!0,xs:12,sm:9},r.a.createElement("div",{className:t.divTop,style:{justifyContent:"space-between"}},r.a.createElement(xe.a,{style:{padding:5}},r.a.createElement(Le.a,null)),r.a.createElement(ne.a,{variant:"h6"},this.props.chatReducer.titleName),r.a.createElement(je.a,{onClick:this.onClickLogOut},"Log out"))),r.a.createElement(se.a,{item:!0,xs:12,sm:3},r.a.createElement("div",{className:t.divBottom,style:{borderRight:"1px solid #e0e0e0"}},r.a.createElement("div",{className:t.searchDiv},r.a.createElement(Oe.a,{placeholder:"Search\u2026",classes:{root:t.inputSearchRoot,input:t.inputSearch},value:this.state.searchText,onChange:function(t){return e.setState({searchText:t.target.value})},onKeyPress:this.handleKeyPressSearch}),r.a.createElement(Ue.a,{className:t.divider}),r.a.createElement(xe.a,{type:"submit",variant:"outlined",className:t.iconButton,onClick:this.handleClickSearch,disabled:this.props.findUserReducer.isFindUser},r.a.createElement(ke.a,null)),r.a.createElement(ht,{className:t.findUser,open:this.state.open,onClose:this.handleClose})),r.a.createElement("div",null,r.a.createElement(_e.a,{className:t.cardListFriend},r.a.createElement(Et,null))))),r.a.createElement(se.a,{item:!0,xs:12,sm:9},r.a.createElement("div",{className:t.divBottom},r.a.createElement(_e.a,{className:t.cardMessage},r.a.createElement("div",{id:"inputMessage",style:{overflow:"auto"}},r.a.createElement("ul",null,this.props.chatReducer.listMessage.map(function(t){if(t.senderID===localStorage.getItem("userID")){var n=e.props.chatReducer.listMessage,a=n[n.length-1];return t===a&&!0===a.isSeen?r.a.createElement(Ge,{content:t.content,key:t._id,sender:!0,seen:!0}):r.a.createElement(Ge,{content:t.content,key:t._id,sender:!0})}return r.a.createElement(Ge,{content:t.content,key:t._id,sender:!1})}))),r.a.createElement("div",null,r.a.createElement(ee.a,{className:t.messageBar,elevation:4},r.a.createElement(Oe.a,{className:t.input,onFocus:this.onFocusMessage,placeholder:"Message...",value:this.state.content,onChange:function(t){return e.setState({content:t.target.value})},onKeyPress:this.handleKeyPressMessage}),r.a.createElement(Ue.a,{className:t.divider}),r.a.createElement(je.a,{color:"secondary",onClick:function(t){e.handleClickSend(t)}},"Send",r.a.createElement(we.a,null))))))))}}]),t}(r.a.Component),St=Object(p.b)(function(e){return{findUserReducer:e.findUserReducer,chatReducer:e.chatReducer,signinReducer:e.signinReducer}},function(e){return{findUser:function(t){return e(Ae(t))},findUser_fail_handle:function(){return e({type:"FINDUSER_FAIL_HANDLE"})},getListFriend:function(){return e(st())},getListMessage:function(t){return e(ct(t))},push_message:function(t){return e(function(e){return{type:"PUSH_MESSAGE",arr:e}}(t))},getNewFriend:function(){return e(function(e){e({type:"CALLING_API"}),it().then(function(t){e(lt(t))}).catch(function(t){e(mt(t))})})},log_out:function(){return e({type:"LOG_OUT"})}}})(Object(Ie.withStyles)(function(e){return{messageBar:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},divider:{width:1,height:40,margin:4},divTop:{padding:e.spacing.unit,display:"flex",flexDirection:"row",borderBottom:"1px solid #e0e0e0"},divBottom:{height:"calc(100vh - "+15*e.spacing.unit+"px)",padding:2*e.spacing.unit},searchDiv:{background:"#e0e0e0",borderRadius:6,color:"#212121",display:"flex",flexDirection:"row"},iconButton:{background:"#bdbdbd"},input:{marginLeft:8,flex:1},inputSearchRoot:{width:"100%"},inputSearch:{paddingLeft:e.spacing.unit},cardMessage:{borderRadius:"6px",height:"calc(100vh - "+13*e.spacing.unit+"px)",display:"flex",flexDirection:"column",justifyContent:"flex-end"},cardListFriend:{marginTop:2*e.spacing.unit,borderRadius:"6px",height:"calc(100vh - "+21*e.spacing.unit+"px)",overflow:"auto"},findUser:{overflow:"auto",height:"calc(100vh - "+21*e.spacing.unit+"px)"}}})(vt)),bt=function(){return r.a.createElement(N.a,null,r.a.createElement("div",null,r.a.createElement(O.a,{exact:!0,path:"/",component:ve}),r.a.createElement(O.a,{path:"/app",component:St})))},It=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:k},r.a.createElement(bt,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(It,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[255,1,2]]]);
//# sourceMappingURL=main.69609197.chunk.js.map